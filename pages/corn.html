Corn is a small<a href="#well-sorta"><sup>*</sup></a>
music playing daemon.  It strikes a balance between nerdy
programmable flexibility and modern desktop integration.

Key features:

<ul>
    <li>Uses libxine for playback -- supports the many file formats that xine does.</li>
    <li>Uses D-BUS and the <a
        href="http://mpris.org/">MPRIS</a> standard for
        inter-process communication.</li>
    <li>Scriptable via any language with D-BUS bindings, or via <a
        href="mpris-remote.html">mpris-remote</a> on the command line.</li>
    <li>Uses GnomeVFS to access media files locally or through a number of
        protocols (SFTP, HTTP, FTP, WebDAV, SMB, inside of gzipped/bzipped tarballs)</li>
    <li>Follows the <a
        href="http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html">XDG
        base directory spec</a>
        for config file directory location.</li>
    <li>Roughly 2000 lines of C.</li>
</ul>

See the <a href="corn-installation.html">build/installation page</a> for
instructions on how to get corn running.

Since Corn is a daemon with no user interface, you need to control it with some
sort of client program.  Check out my <a
href="mpris-remote.html">mpris-remote</a> command line utility.

If you're interested in writing a program to control or query Corn, see the <a
href="corn-dbus-api.html">Corn D-BUS API reference</a>.  You might also want to
look at the <a href="mpris-remote.html">mpris-remote</a> source code as an
example.

Corn is a fork of <a href="http://quark.sunsite.dk/">Quark</a>.

Please report bugs <a href="https://bugs.launchpad.net/corn">here</a>.  There
is also a discussion <a href="https://launchpad.net/~corn-talk">mailing
list</a>.

<h3>other programs that will work with corn</h3>

<a href="http://hans.fugal.net/src/mprismote/">mprismote</a>, which controls an
MPRIS-compatible player from across a network.

An MPRIS <a href="http://mpris.rubyforge.org/classes/MPRIS.html">Ruby module</a>.

<a href="http://code.google.com/p/hashao/wiki/Lyricod">Lyricod</a>, an onscreen
lyric display program.

<a href="http://www.fredemmott.co.uk/index.php?page=blogentry&id=157">mprisshell</a>.

TODO: Submit a plugin for <a
href="http://www.kuliniewicz.org/music-applet/">Music Applet</a>.

<h4>chat clients</h4>

    There's a "now playing" <a
    href="http://m0n5t3r.info/work/pidgin-mpris">plugin</a> for Pidgin which is
    in Debian, Ubuntu, and Gentoo at least.

    There's unofficial <a
    href="http://flyspray.psi-im.org/task/773?dev=3">"now
    playing" code</a> for the <a href="http://psi-im.org/">Psi</a> IM client.

    The <a href="http://kmess.org/">KMess</a> IM client has an <a
    href="http://trac.kmess.org/ticket/357">outstanding bug</a> requesting MPRIS
    support (they already support other D-BUS stuff so it looks like a small task).

    The Gajim Jabber client supports a "now playing" feature <a
    href="http://trac.gajim.org/wiki/GajimAndMusicPlayer">through MPRIS</a>.

    <a href="http://www.kvirc.net/">KVIrc</a> IRC client.

<h3>don't have a dbus session bus running?</h3>

If you use <code>startx</code> with a smaller window manager instead of a full
blown desktop environment, you may not have a dbus session bus running.  The
system bus (<code>dbus-daemon --system</code> in your <code>ps</code> output)
will not do -- it is not for communication between user apps.  To get a session
bus running, put this in your .xinitrc:

<pre class="sh"><code>if test -z "$DBUS_SESSION_BUS_ADDRESS" ; then
    eval `dbus-launch --sh-syntax --exit-with-session`
fi</code></pre>

<h3>selecting an audio driver</h3>

For me, libxine by default tries to connect to a pulse audio daemon with a
timeout, which caused a startup delay for corn.  But corn has its own xine
config file, which is at <code>~/.config/corn/xine_config</code>.  You can just
symlink it to <code>~/.xine/config</code> if you want corn to use the same
libxine settings as the xine program, or it can be its own separate file.  Here
is my <code>xine_config</code>:

<pre><code>audio.driver:alsa
engine.decoder_priorities.mad:1000</code></pre>

<h3><a name="well-sorta">well, depends on what you mean by small</a></h3>

Corn actually uses kind of a lot of memory right now (60-80MB for me).  This is
a libxine problem, apparently due to it <a
    href="http://paul-pach.blogspot.com/2008/03/finding-bloat-in-kde4.html?showComment=1208382840000#c4871031230157608326">allocating
    tons of unnecessary buffers</a>.  Supposedly it will be fixed sometime.
But even until then -- hey -- 80MB is only about 4% of 2GB!

What I really care about when it comes to smallness is the size and complexity
of the code.

